<app-top-nav></app-top-nav>
<app-profile-essentials></app-profile-essentials>
<div class="campaign-container">

</div>
<main>
  <section>
    <ul class="products-list">
      <li *ngIf="products.length === 0">
        کالایی یافت نشد
      </li>
      <li *ngFor="let product of products">
        <app-product-list-item [product]="product"></app-product-list-item>
      </li>
      <li *ngIf="!addPanel">
        <button id="add" (click)="addPanel = true">
          اضافه کردن محصول جدید
        </button>
      </li>
      <li *ngIf="addPanel" id="add-panel">
        <label for="title"> عنوان</label>
        <input type="text" id="title" placeholder="عنوان" [(ngModel)]="newProduct.title" name="title">
        <label for="price" >قیمت</label>
        <input type="number" id="price" placeholder="قیمت" [(ngModel)]="newProduct.price"
               name="price" step="1000" min="0">

        <input type="file" id="image" placeholder="عکس" class="custom-file-input" accept="image/x-png,image/gif, image/jpeg"
               #inputFile required (change)="setFile($event)">
        <span class="image-path">
          {{inputFile.value}}
        </span>
        <label>دسته</label>
        <mat-select [(ngModel)]="newProduct.category" required>
          <mat-option *ngFor="let category of (categories$|async)" value="{{category.id}}">
            {{category.name}}
          </mat-option>
        </mat-select>
        <button (click)="add()" [disabled]="!newProduct.title || !newProduct.price || !inputFile.validity.valid ||
        newProduct.category === 0">
          اضافه
        </button>
      </li>
    </ul>
  </section>
</main>
